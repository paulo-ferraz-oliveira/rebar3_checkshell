%
%% Compilation.

{minimum_otp_vsn, "24"}.

{erl_opts, [debug_info, report, verbose, warn_missing_spec_all, warnings_as_errors]}.

{project_plugins,
 [{erlfmt, "1.2.0"},
 {rebar3_ex_doc, "0.2.18"},
  {rebar3_hank, "1.4.0"},
  {rebar3_hex, "7.0.7"},
  {rebar3_lint, "3.0.1"}]}.

%
%% Development.

{alias, [{ci, [fmt, hank, lint, xref, dialyzer, ct, cover, ex_doc]}]}.

{shell, [{apps, [rebar3_checkshell]}]}.

{erlfmt, [
    write,
    {files, [
        "src/*.app.src",
        "src/**/*.erl",
        "test/**/*.erl"
    ]}
]}.

{ex_doc,
 [{extras, ["README.md"]},
  {main, "README.md"},
  {source_url, "https://github.com/paulo-ferraz-oliveira/rebar3_checkshell"}]}.

{profiles,
 [{test,
   [{cover_enabled, true},
    {cover_opts, [verbose]},
    {erl_opts,
     [debug_info,
      report,
      verbose,
      nowarn_export_all,
      nowarn_missing_spec_all,
      warnings_as_errors]},
    {extra_src_dirs, [{"test", [{recursive, true}]}]}]}]}.

%
%% Static analysis.

{dialyzer, [{warnings, [error_handling, underspecs, unmatched_returns]}]}.

{xref_checks, [deprecated_function_calls, exports_not_used, locals_not_used]}.

{xref_extra_paths, ["test"]}.
